{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { first } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../general-api.service\";\nimport * as i4 from \"../login.service\";\nimport * as i5 from \"@angular/common\";\nfunction LoginComponent_div_15_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Email address is required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_15_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" This is not a proper email address \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtemplate(1, LoginComponent_div_15_div_1_Template, 2, 0, \"div\", 17);\n    i0.ɵɵtemplate(2, LoginComponent_div_15_div_2_Template, 2, 0, \"div\", 17);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isSubmitted && ctx_r0.formEmail.errors[\"required\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isSubmitted && ctx_r0.formEmail.errors[\"pattern\"]);\n  }\n}\nfunction LoginComponent_div_20_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Password is required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtemplate(1, LoginComponent_div_20_div_1_Template, 2, 0, \"div\", 17);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.isSubmitted && ctx_r1.formPassword.errors[\"required\"]);\n  }\n}\nfunction LoginComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵtext(1, \" Invalid email or password \");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    \"is-invalid\": a0\n  };\n};\nexport class LoginComponent {\n  constructor(formBuilder, router, api, loginService) {\n    this.formBuilder = formBuilder;\n    this.router = router;\n    this.api = api;\n    this.loginService = loginService;\n    this.isSubmitted = false;\n    this.accountNotFound = false;\n  }\n  ngOnInit() {\n    this.form = this.formBuilder.group({\n      email: ['', [Validators.required, Validators.pattern('^[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$')]],\n      password: ['', Validators.required]\n    });\n  }\n  get formEmail() {\n    return this.form.controls['email'];\n  }\n  get formPassword() {\n    return this.form.controls['password'];\n  }\n  get formBody() {\n    return this.form;\n  }\n  onSubmit() {\n    this.isSubmitted = true;\n    if (this.form.invalid) {\n      return;\n    }\n    let user = {\n      id: null,\n      email: this.formEmail.value,\n      password: this.formPassword.value\n    };\n    this.api.login(user).pipe(first()).subscribe({\n      next: data => {\n        if (data.length === 0) {\n          this.accountNotFound = true;\n        } else {\n          this.accountNotFound = false;\n          let token = data[0].token || '';\n          this.loginService.LoginToken = token;\n          this.router.navigateByUrl('histogram');\n        }\n      },\n      error: error => {},\n      complete: () => {}\n    });\n  }\n  reFocus() {\n    this.isSubmitted = false;\n    this.accountNotFound = false;\n  }\n}\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.GeneralApiService), i0.ɵɵdirectiveInject(i4.LoginService));\n};\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 25,\n  vars: 11,\n  consts: [[1, \"main-login\"], [1, \"card\", \"shadow\", \"login-page\"], [1, \"info\"], [1, \"login-header\"], [\"src\", \"assets/img/login.jpg\"], [1, \"shadow\", \"card\", \"login-card\"], [1, \"card-body\"], [1, \"login-form\", 3, \"formGroup\", \"ngSubmit\"], [1, \"login-input\"], [1, \"form-label\"], [\"type\", \"text\", \"formControlName\", \"email\", 1, \"form-control\", 3, \"ngClass\", \"focus\"], [\"class\", \"invalid-feedback\", 4, \"ngIf\"], [\"type\", \"password\", \"formControlName\", \"password\", 1, \"form-control\", 3, \"ngClass\", \"focus\"], [1, \"submit-button\"], [1, \"btn\", \"btn-primary\", 3, \"disabled\"], [\"class\", \"invalid-submit\", 4, \"ngIf\"], [1, \"invalid-feedback\"], [4, \"ngIf\"], [1, \"invalid-submit\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"h1\", 3);\n      i0.ɵɵtext(4, \" Welcome to the UOL Clinical Data Center \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"h5\");\n      i0.ɵɵtext(6, \"Here you can find your health infomation \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(7, \"img\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"div\", 5)(9, \"div\", 6)(10, \"form\", 7);\n      i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_10_listener() {\n        return ctx.onSubmit();\n      });\n      i0.ɵɵelementStart(11, \"div\", 8)(12, \"label\", 9);\n      i0.ɵɵtext(13, \"Email\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"input\", 10);\n      i0.ɵɵlistener(\"focus\", function LoginComponent_Template_input_focus_14_listener() {\n        return ctx.reFocus();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(15, LoginComponent_div_15_Template, 3, 2, \"div\", 11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"div\", 8)(17, \"label\", 9);\n      i0.ɵɵtext(18, \"Password\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"input\", 12);\n      i0.ɵɵlistener(\"focus\", function LoginComponent_Template_input_focus_19_listener() {\n        return ctx.reFocus();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(20, LoginComponent_div_20_Template, 2, 1, \"div\", 11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"div\", 13)(22, \"button\", 14);\n      i0.ɵɵtext(23, \"Login\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(24, LoginComponent_div_24_Template, 2, 0, \"div\", 15);\n      i0.ɵɵelementEnd()()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"formGroup\", ctx.form);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(7, _c0, ctx.isSubmitted && ctx.formEmail.errors));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isSubmitted && ctx.formEmail.errors);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(9, _c0, ctx.isSubmitted && ctx.formPassword.errors));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isSubmitted && ctx.formPassword.errors);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"disabled\", ctx.isSubmitted && ctx.formBody.invalid);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.isSubmitted && ctx.accountNotFound);\n    }\n  },\n  dependencies: [i5.NgClass, i5.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n  styles: [\".is-invalid[_ngcontent-%COMP%] {\\n  background-color: #f6d1d1;\\n}\\n\\n.main-login[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  align-content: center;\\n  flex-flow: column wrap;\\n  height: 100vh;\\n  background-image: linear-gradient(to right, #e3161d, #03a3ed);\\n}\\n.main-login[_ngcontent-%COMP%]   .login-page[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: center;\\n  align-items: center;\\n  width: 88%;\\n}\\n.main-login[_ngcontent-%COMP%]   .login-page[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] {\\n  width: 50%;\\n  margin: 5%;\\n  align-items: center;\\n  display: flex;\\n  flex-direction: column;\\n}\\n.main-login[_ngcontent-%COMP%]   .login-page[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\\n  width: 100%;\\n  height: auto;\\n}\\n.main-login[_ngcontent-%COMP%]   .login-page[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%] {\\n  color: #0d6efd;\\n  font-size: 2em;\\n  font-weight: bolder;\\n}\\n.main-login[_ngcontent-%COMP%]   .login-page[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%] {\\n  width: 30%;\\n  height: 30vh;\\n  margin-right: 5%;\\n}\\n.main-login[_ngcontent-%COMP%]   .login-page[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: space-evenly;\\n}\\n.main-login[_ngcontent-%COMP%]   .login-page[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-input[_ngcontent-%COMP%] {\\n  height: 10vh;\\n  display: block;\\n}\\n.main-login[_ngcontent-%COMP%]   .login-page[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .submit-button[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  height: 8vh;\\n}\\n.main-login[_ngcontent-%COMP%]   .login-page[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .submit-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n  width: 100%;\\n  height: 4vh;\\n  font-size: larger;\\n  font-weight: bolder;\\n}\\n.main-login[_ngcontent-%COMP%]   .login-page[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .submit-button[_ngcontent-%COMP%]   .invalid-submit[_ngcontent-%COMP%] {\\n  align-self: center;\\n  color: red;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbG9naW4vbG9naW4uY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSx5QkFBQTtBQUNGOztBQUNBO0VBQ0UsYUFBQTtFQUNBLHVCQUFBO0VBQ0EsbUJBQUE7RUFDQSxxQkFBQTtFQUNBLHNCQUFBO0VBQ0EsYUFBQTtFQUNBLDZEQUFBO0FBRUY7QUFBRTtFQUNFLGFBQUE7RUFDQSxtQkFBQTtFQUNBLHVCQUFBO0VBQ0EsbUJBQUE7RUFDQSxVQUFBO0FBRUo7QUFBSTtFQUNFLFVBQUE7RUFDQSxVQUFBO0VBQ0EsbUJBQUE7RUFDQSxhQUFBO0VBQ0Esc0JBQUE7QUFFTjtBQUFNO0VBQ0UsV0FBQTtFQUNBLFlBQUE7QUFFUjtBQUNNO0VBQ0UsY0FBQTtFQUNBLGNBQUE7RUFDQSxtQkFBQTtBQUNSO0FBR0k7RUFDRSxVQUFBO0VBQ0EsWUFBQTtFQUNBLGdCQUFBO0FBRE47QUFHTTtFQUNFLGFBQUE7RUFDQSxzQkFBQTtFQUNBLDZCQUFBO0FBRFI7QUFHUTtFQUNFLFlBQUE7RUFDQSxjQUFBO0FBRFY7QUFJUTtFQUNFLGFBQUE7RUFDQSxzQkFBQTtFQUNBLFdBQUE7QUFGVjtBQUlVO0VBQ0UsV0FBQTtFQUNBLFdBQUE7RUFDQSxpQkFBQTtFQUNBLG1CQUFBO0FBRlo7QUFLVTtFQUNFLGtCQUFBO0VBQ0EsVUFBQTtBQUhaIiwic291cmNlc0NvbnRlbnQiOlsiLmlzLWludmFsaWQge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNmNmQxZDE7XHJcbn1cclxuLm1haW4tbG9naW4ge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBhbGlnbi1jb250ZW50OiBjZW50ZXI7XHJcbiAgZmxleC1mbG93OiBjb2x1bW4gd3JhcDtcclxuICBoZWlnaHQ6IDEwMHZoO1xyXG4gIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgI2UzMTYxZCwgIzAzYTNlZCk7XHJcblxyXG4gIC5sb2dpbi1wYWdlIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xyXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgd2lkdGg6IDg4JTtcclxuXHJcbiAgICAuaW5mbyB7XHJcbiAgICAgIHdpZHRoOiA1MCU7XHJcbiAgICAgIG1hcmdpbjogNSU7XHJcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcblxyXG4gICAgICBpbWcge1xyXG4gICAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgICAgIGhlaWdodDogYXV0bztcclxuICAgICAgfVxyXG5cclxuICAgICAgLmxvZ2luLWhlYWRlciB7XHJcbiAgICAgICAgY29sb3I6ICMwZDZlZmQ7XHJcbiAgICAgICAgZm9udC1zaXplOiAyZW07XHJcbiAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGRlcjtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC5sb2dpbi1jYXJkIHtcclxuICAgICAgd2lkdGg6IDMwJTtcclxuICAgICAgaGVpZ2h0OiAzMHZoO1xyXG4gICAgICBtYXJnaW4tcmlnaHQ6IDUlO1xyXG5cclxuICAgICAgLmxvZ2luLWZvcm0ge1xyXG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWV2ZW5seTtcclxuXHJcbiAgICAgICAgLmxvZ2luLWlucHV0e1xyXG4gICAgICAgICAgaGVpZ2h0OiAxMHZoO1xyXG4gICAgICAgICAgZGlzcGxheTogYmxvY2s7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAuc3VibWl0LWJ1dHRvbiB7XHJcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICAgICAgICAgIGhlaWdodDogOHZoO1xyXG5cclxuICAgICAgICAgIGJ1dHRvbiB7XHJcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgICAgICAgICBoZWlnaHQ6IDR2aDtcclxuICAgICAgICAgICAgZm9udC1zaXplOiBsYXJnZXI7XHJcbiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkZXI7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLmludmFsaWQtc3VibWl0IHtcclxuICAgICAgICAgICAgYWxpZ24tc2VsZjogY2VudGVyO1xyXG4gICAgICAgICAgICBjb2xvcjogcmVkO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["Validators","first","i0","LoginComponent","constructor","formBuilder","router","api","loginService","ngOnInit","form","group","email","required","pattern","password","formEmail","controls","formPassword","formBody","onSubmit","isSubmitted","invalid","user","id","value","login","pipe","subscribe","next","data","length","accountNotFound","token","LoginToken","navigateByUrl","error","complete","reFocus","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["D:\\practise\\ClinicalDataApp\\my-clinical-data-app\\src\\app\\login\\login.component.ts","D:\\practise\\ClinicalDataApp\\my-clinical-data-app\\src\\app\\login\\login.component.html"],"sourcesContent":["import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { GeneralApiService } from '../general-api.service';\nimport { User } from '../model/user';\nimport { first } from 'rxjs';\nimport { LoginService } from '../login.service';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.scss'],\n})\nexport class LoginComponent implements OnInit {\n  form!: FormGroup;\n  isSubmitted = false;\n  accountNotFound = false;\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private router: Router,\n    private api: GeneralApiService,\n    private loginService: LoginService\n  ) {}\n\n  ngOnInit() {\n    this.form = this.formBuilder.group({\n      email: [\n        '',\n        [\n          Validators.required,\n          Validators.pattern('^[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$'),\n        ],\n      ],\n      password: ['', Validators.required],\n    });\n  }\n\n  get formEmail() {\n    return this.form.controls['email'];\n  }\n\n  get formPassword() {\n    return this.form.controls['password'];\n  }\n\n  get formBody() {\n    return this.form;\n  }\n\n  onSubmit() {\n    this.isSubmitted = true;\n\n    if (this.form.invalid) {\n      return;\n    }\n\n    let user: User = {\n      id: null,\n      email: this.formEmail.value,\n      password: this.formPassword.value,\n    };\n\n    this.api\n      .login(user)\n      .pipe(first())\n      .subscribe({\n        next: (data) => {\n          if (data.length === 0) {\n            this.accountNotFound = true;\n          } else {\n            this.accountNotFound = false;\n            let token = data[0].token || '';\n            this.loginService.LoginToken = token;\n            this.router.navigateByUrl('histogram');\n          }\n        },\n        error: (error) => {},\n        complete: () => {},\n      });\n  }\n\n  reFocus(){\n    this.isSubmitted = false;\n    this.accountNotFound = false\n  }\n}\n","<div class=\"main-login\">\n  <div class=\"card shadow login-page\">\n    <div class=\"info\">\n      <h1 class=\"login-header\">\n        Welcome to the UOL Clinical Data Center\n      </h1>\n      <h5>Here you can find your health infomation </h5>\n      <img src=\"assets/img/login.jpg\" />\n    </div>\n    <div class=\"shadow card login-card\">\n      <div class=\"card-body\">\n        <form class=\"login-form\" [formGroup]=\"form\" (ngSubmit)=\"onSubmit()\">\n          <div class=\"login-input\">\n            <label class=\"form-label\">Email</label>\n            <input\n              type=\"text\"\n              formControlName=\"email\"\n              class=\"form-control\"\n              [ngClass]=\"{ 'is-invalid': isSubmitted && formEmail.errors }\"\n              (focus)=\"reFocus()\"\n            />\n            <div *ngIf=\"isSubmitted && formEmail.errors\" class=\"invalid-feedback\">\n              <div *ngIf=\"isSubmitted && formEmail.errors['required']\">\n                Email address is required\n              </div>\n              <div *ngIf=\"isSubmitted && formEmail.errors['pattern']\">\n                This is not a proper email address\n              </div>\n            </div>\n          </div>\n          <div class=\"login-input\">\n            <label class=\"form-label\">Password</label>\n            <input\n              type=\"password\"\n              formControlName=\"password\"\n              class=\"form-control\"\n              [ngClass]=\"{ 'is-invalid': isSubmitted && formPassword.errors }\"\n              (focus)=\"reFocus()\"\n            />\n            <div\n              *ngIf=\"isSubmitted && formPassword.errors\"\n              class=\"invalid-feedback\"\n            >\n              <div *ngIf=\"isSubmitted && formPassword.errors['required']\">\n                Password is required\n              </div>\n            </div>\n          </div>\n          <div class=\"submit-button\">\n            <button [disabled]=\"isSubmitted && formBody.invalid\" class=\"btn btn-primary\">Login</button>\n            <div class=\"invalid-submit\" *ngIf=\"isSubmitted && accountNotFound\">\n              Invalid email or password\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</div>\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}