{"ast":null,"code":"import { BehaviorSubject, map } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nexport class ClinicalDatabaseService {\n  constructor() {\n    this.userData = [{\n      id: 1,\n      email: 'victor@gmail.com',\n      password: '123b',\n      token: 'iasgosdjaoifgo'\n    }, {\n      id: 2,\n      email: 'tove@gmail.com',\n      password: '345a',\n      token: 'fgdfgdfg'\n    }];\n    this.genSub$ = new BehaviorSubject(this.generateUserBloodPressure());\n  }\n  createDb() {\n    const users = this.userData;\n    let userBloodPressureData = this.generateUserBloodPressure();\n    setInterval(() => {\n      this.genSub$;\n    }, 2000);\n    this.genSub$.pipe(map(data => userBloodPressureData = data));\n    return {\n      users,\n      userBloodPressureData\n    };\n  }\n  generateUserBloodPressure() {\n    return this.userData.map(each => {\n      let result = {\n        id: null,\n        token: each.token,\n        bloodPressure: []\n      };\n      let randomPressure = [];\n      for (let i = 0; i < 200; i++) {\n        //generate 200 random blood pressure to datebase\n        randomPressure.push(Math.floor(Math.random() * 100) + 80); //from 80 to 180\n      }\n\n      result.bloodPressure = randomPressure;\n      return result;\n    });\n  }\n}\nClinicalDatabaseService.ɵfac = function ClinicalDatabaseService_Factory(t) {\n  return new (t || ClinicalDatabaseService)();\n};\nClinicalDatabaseService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: ClinicalDatabaseService,\n  factory: ClinicalDatabaseService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"AAIA,SAASA,eAAe,EAAEC,GAAG,QAA0B,MAAM;;AAK7D,OAAM,MAAOC,uBAAuB;EAHpCC;IAIU,aAAQ,GAAW,CACzB;MACEC,EAAE,EAAE,CAAC;MACLC,KAAK,EAAE,kBAAkB;MACzBC,QAAQ,EAAE,MAAM;MAChBC,KAAK,EAAE;KACR,EACD;MAAEH,EAAE,EAAE,CAAC;MAAEC,KAAK,EAAE,gBAAgB;MAAEC,QAAQ,EAAE,MAAM;MAAEC,KAAK,EAAE;IAAU,CAAE,CACxE;IAEO,YAAO,GAAG,IAAIP,eAAe,CAAsB,IAAI,CAACQ,yBAAyB,EAAE,CAAC;;EAE5FC,QAAQ;IACN,MAAMC,KAAK,GAAW,IAAI,CAACC,QAAQ;IACnC,IAAIC,qBAAqB,GACvB,IAAI,CAACJ,yBAAyB,EAAE;IAEhCK,WAAW,CAAC,MAAI;MACd,IAAI,CAACC,OAAO;IACd,CAAC,EAAE,IAAI,CAAC;IAER,IAAI,CAACA,OAAO,CAACC,IAAI,CACfd,GAAG,CAAEe,IAAI,IAAKJ,qBAAqB,GAAGI,IAAI,CAAC,CAC5C;IAEH,OAAO;MAAEN,KAAK;MAAEE;IAAqB,CAAE;EACzC;EAEAJ,yBAAyB;IACvB,OAAO,IAAI,CAACG,QAAQ,CAACV,GAAG,CAAEgB,IAAI,IAAI;MAChC,IAAIC,MAAM,GAAsB;QAC9Bd,EAAE,EAAE,IAAI;QACRG,KAAK,EAAEU,IAAI,CAACV,KAAK;QACjBY,aAAa,EAAE;OAChB;MACD,IAAIC,cAAc,GAAG,EAAE;MACvB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,GAAG,EAAEA,CAAC,EAAE,EAAE;QAAC;QAC7BD,cAAc,CAACE,IAAI,CAACC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAG,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC;;;MAE5DP,MAAM,CAACC,aAAa,GAAGC,cAAc;MACrC,OAAOF,MAAM;IACf,CAAC,CAAC;EACJ;;AA3CWhB,uBAAuB;mBAAvBA,uBAAuB;AAAA;AAAvBA,uBAAuB;SAAvBA,uBAAuB;EAAAwB,SAAvBxB,uBAAuB;EAAAyB,YAFtB;AAAM","names":["BehaviorSubject","map","ClinicalDatabaseService","constructor","id","email","password","token","generateUserBloodPressure","createDb","users","userData","userBloodPressureData","setInterval","genSub$","pipe","data","each","result","bloodPressure","randomPressure","i","push","Math","floor","random","factory","providedIn"],"sourceRoot":"","sources":["D:\\practise\\ClinicalDataApp\\my-clinical-data-app\\src\\app\\clinical-database.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { InMemoryDbService } from 'angular-in-memory-web-api';\nimport { User } from './model/user';\nimport { UserBloodPressure } from './model/user-blood-pressure';\nimport { BehaviorSubject, map, switchMap, timer } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ClinicalDatabaseService implements InMemoryDbService {\n  private userData: User[] = [\n    {\n      id: 1,\n      email: 'victor@gmail.com',\n      password: '123b',\n      token: 'iasgosdjaoifgo',\n    },\n    { id: 2, email: 'tove@gmail.com', password: '345a', token: 'fgdfgdfg' },\n  ];\n\n  private genSub$ = new BehaviorSubject<UserBloodPressure[]>(this.generateUserBloodPressure());\n\n  createDb() {\n    const users: User[] = this.userData;\n    let userBloodPressureData: UserBloodPressure[] =\n      this.generateUserBloodPressure();\n\n      setInterval(()=>{\n        this.genSub$\n      }, 2000)\n\n      this.genSub$.pipe(\n        map((data) => userBloodPressureData = data)\n      );\n\n    return { users, userBloodPressureData };\n  }\n\n  generateUserBloodPressure(): UserBloodPressure[] {\n    return this.userData.map((each) => {\n      let result: UserBloodPressure = {\n        id: null,\n        token: each.token,\n        bloodPressure: [],\n      };\n      let randomPressure = [];\n      for (let i = 0; i < 200; i++) {//generate 200 random blood pressure to datebase\n        randomPressure.push(Math.floor(Math.random() * 100) + 80);//from 80 to 180\n      }\n      result.bloodPressure = randomPressure;\n      return result;\n    });\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}