{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { first } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../general-api.service\";\nimport * as i4 from \"../login.service\";\nimport * as i5 from \"@angular/common\";\nfunction LoginComponent_div_13_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Email address is required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_13_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" This is not an proper email address \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtemplate(1, LoginComponent_div_13_div_1_Template, 2, 0, \"div\", 14);\n    i0.ɵɵtemplate(2, LoginComponent_div_13_div_2_Template, 2, 0, \"div\", 14);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isSubmitted && ctx_r0.formEmail.errors[\"required\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isSubmitted && ctx_r0.formEmail.errors[\"pattern\"]);\n  }\n}\nfunction LoginComponent_div_18_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Password is required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtemplate(1, LoginComponent_div_18_div_1_Template, 2, 0, \"div\", 14);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.isSubmitted && ctx_r1.formPassword.errors[\"required\"]);\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    \"is-invalid\": a0\n  };\n};\nexport class LoginComponent {\n  constructor(formBuilder, route, router, api, loginService) {\n    this.formBuilder = formBuilder;\n    this.route = route;\n    this.router = router;\n    this.api = api;\n    this.loginService = loginService;\n    this.isSubmitted = false;\n  }\n  ngOnDestroy() {\n    throw new Error('Method not implemented.');\n  }\n  ngOnInit() {\n    this.form = this.formBuilder.group({\n      email: ['', [Validators.required, Validators.pattern(\"^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$\")]],\n      password: ['', Validators.required]\n    });\n  }\n  get formEmail() {\n    return this.form.controls['email'];\n  }\n  get formPassword() {\n    return this.form.controls['password'];\n  }\n  onSubmit() {\n    this.isSubmitted = true;\n    if (this.form.invalid) {\n      return;\n    }\n    let user = {\n      id: null,\n      email: this.formEmail.value,\n      password: this.formPassword.value\n    };\n    this.api.login(user).pipe(first()).subscribe({\n      next: data => {\n        if (data.length === 0) {} else {\n          let token = data[0].token || \"\";\n          this.loginService.LoginToken = token;\n        }\n      },\n      error: error => {},\n      complete: () => {}\n    });\n  }\n}\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.GeneralApiService), i0.ɵɵdirectiveInject(i4.LoginService));\n};\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 22,\n  vars: 9,\n  consts: [[1, \"login-page\"], [1, \"info\"], [1, \"card-header\"], [1, \"card\", \"login-form\"], [1, \"card-body\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"mb-3\"], [1, \"form-label\"], [\"type\", \"text\", \"formControlName\", \"email\", 1, \"form-control\", 3, \"ngClass\"], [\"class\", \"invalid-feedback\", 4, \"ngIf\"], [\"type\", \"password\", \"formControlName\", \"password\", 1, \"form-control\", 3, \"ngClass\"], [\"ca\", \"\"], [1, \"btn\", \"btn-primary\"], [1, \"invalid-feedback\"], [4, \"ngIf\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h1\", 2);\n      i0.ɵɵtext(3, \"Welcome to UOL clinical data center\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"h4\");\n      i0.ɵɵtext(5, \"here you can find health info of yourself\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(6, \"div\", 3)(7, \"div\", 4)(8, \"form\", 5);\n      i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_8_listener() {\n        return ctx.onSubmit();\n      });\n      i0.ɵɵelementStart(9, \"div\", 6)(10, \"label\", 7);\n      i0.ɵɵtext(11, \"Username\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(12, \"input\", 8);\n      i0.ɵɵtemplate(13, LoginComponent_div_13_Template, 3, 2, \"div\", 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"div\", 6)(15, \"label\", 7);\n      i0.ɵɵtext(16, \"Password\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(17, \"input\", 10);\n      i0.ɵɵtemplate(18, LoginComponent_div_18_Template, 2, 1, \"div\", 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"div\", 11)(20, \"button\", 12);\n      i0.ɵɵtext(21, \" Login \");\n      i0.ɵɵelementEnd()()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"formGroup\", ctx.form);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(5, _c0, ctx.isSubmitted && ctx.formEmail.errors));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isSubmitted && ctx.formEmail.errors);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(7, _c0, ctx.isSubmitted && ctx.formPassword.errors));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isSubmitted && ctx.formPassword.errors);\n    }\n  },\n  dependencies: [i5.NgClass, i5.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n  styles: [\".is-invalid[_ngcontent-%COMP%] {\\n  background-color: red;\\n}\\n\\n.login-page[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: center;\\n}\\n.login-page[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] {\\n  width: 45%;\\n  margin: 5%;\\n}\\n.login-page[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%] {\\n  color: blue;\\n}\\n.login-page[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%] {\\n  width: 45%;\\n  margin-right: 5%;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbG9naW4vbG9naW4uY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxxQkFBQTtBQUNGOztBQUVBO0VBQ0UsYUFBQTtFQUNBLG1CQUFBO0VBQ0EsdUJBQUE7QUFDRjtBQUNFO0VBQ0UsVUFBQTtFQUNBLFVBQUE7QUFDSjtBQUNJO0VBQ0UsV0FBQTtBQUNOO0FBR0U7RUFDRSxVQUFBO0VBQ0EsZ0JBQUE7QUFESiIsInNvdXJjZXNDb250ZW50IjpbIi5pcy1pbnZhbGlke1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHJlZDtcclxufVxyXG5cclxuLmxvZ2luLXBhZ2V7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWRpcmVjdGlvbjogcm93O1xyXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG5cclxuICAuaW5mb3tcclxuICAgIHdpZHRoOiA0NSU7XHJcbiAgICBtYXJnaW46IDUlO1xyXG5cclxuICAgIGgxe1xyXG4gICAgICBjb2xvcjogYmx1ZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC5sb2dpbi1mb3Jte1xyXG4gICAgd2lkdGg6IDQ1JTtcclxuICAgIG1hcmdpbi1yaWdodDogNSU7XHJcbiAgfVxyXG59XHJcblxyXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["Validators","first","i0","LoginComponent","constructor","formBuilder","route","router","api","loginService","ngOnDestroy","Error","ngOnInit","form","group","email","required","pattern","password","formEmail","controls","formPassword","onSubmit","isSubmitted","invalid","user","id","value","login","pipe","subscribe","next","data","length","token","LoginToken","error","complete","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["D:\\practise\\ClinicalDataApp\\my-clinical-data-app\\src\\app\\login\\login.component.ts","D:\\practise\\ClinicalDataApp\\my-clinical-data-app\\src\\app\\login\\login.component.html"],"sourcesContent":["import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { GeneralApiService } from '../general-api.service';\nimport { User } from '../model/user';\nimport { Observable, first } from 'rxjs';\nimport { LoginService } from '../login.service';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.scss'],\n})\nexport class LoginComponent implements OnInit, OnDestroy {\n  form!: FormGroup;\n  isSubmitted = false;\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private route: ActivatedRoute,\n    private router: Router,\n    private api: GeneralApiService,\n    private loginService: LoginService\n  ) {}\n\n  ngOnDestroy(): void {\n    throw new Error('Method not implemented.');\n  }\n\n  ngOnInit() {\n    this.form = this.formBuilder.group({\n      email: ['', [Validators.required, Validators.pattern(\"^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$\")]],\n      password: ['', Validators.required],\n    });\n  }\n\n  get formEmail() {\n    return this.form.controls['email'];\n  }\n\n  get formPassword() {\n    return this.form.controls['password'];\n  }\n\n  onSubmit() {\n    this.isSubmitted = true;\n\n    if(this.form.invalid){\n      return;\n    }\n\n    let user:User = {\n      id: null,\n      email: this.formEmail.value,\n      password: this.formPassword.value\n    }\n\n    this.api.login(user)\n    .pipe(first())\n    .subscribe({\n      next: data => {\n        if(data.length === 0){\n\n        }\n        else{\n          let token = data[0].token || \"\";\n          this.loginService.LoginToken = token;\n        }\n\n      },\n      error: error => {\n\n\n      },\n      complete: () => {\n        \n      }\n  })\n  }\n}\n","<div class=\"login-page\">\n    <div class=\"info\">\n        <h1 class=\"card-header\">Welcome to UOL clinical data center</h1>\n        <h4>here you can find health info of yourself</h4>\n    </div>\n    <div class=\"card login-form\">\n        <div class=\"card-body\">\n          <form [formGroup]=\"form\" (ngSubmit)=\"onSubmit()\">\n            <div class=\"mb-3\">\n              <label class=\"form-label\">Username</label>\n              <input\n                type=\"text\"\n                formControlName=\"email\"\n                class=\"form-control\"\n                [ngClass]=\"{ 'is-invalid': isSubmitted && formEmail.errors }\"\n              />\n              <div\n                *ngIf=\"isSubmitted && formEmail.errors\"\n                class=\"invalid-feedback\"\n              >\n                <div *ngIf=\"isSubmitted && formEmail.errors['required']\">\n                  Email address is required\n                </div>\n                <div *ngIf=\"isSubmitted && formEmail.errors['pattern']\">\n                  This is not an proper email address\n                </div>\n              </div>\n            </div>\n            <div class=\"mb-3\">\n              <label class=\"form-label\">Password</label>\n              <input\n                type=\"password\"\n                formControlName=\"password\"\n                class=\"form-control\"\n                [ngClass]=\"{ 'is-invalid': isSubmitted && formPassword.errors }\"\n              />\n              <div\n                *ngIf=\"isSubmitted && formPassword.errors\"\n                class=\"invalid-feedback\"\n              >\n                <div *ngIf=\"isSubmitted && formPassword.errors['required']\">\n                  Password is required\n                </div>\n              </div>\n            </div>\n            <div ca>\n              <button class=\"btn btn-primary\">\n                Login\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n</div>\n\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}